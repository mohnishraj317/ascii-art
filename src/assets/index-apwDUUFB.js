(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();const c=document.querySelector(".cnv"),g=c.getContext("2d");function p(e,t=innerWidth,r=innerHeight){const o=devicePixelRatio;e.width=t*o,e.height=r*o,e.style.width=t+"px",e.style.height=r+"px",e.getContext("2d").scale(o,o)}const O=(e,t,r)=>{let o=t*(r*4)+e*4;return[o,o+1,o+2,o+3]},x=(e,t,r)=>Math.sqrt(e*e*.299+t*t*.587+r*r*.114);async function L(e){const t=new Image;return t.src=e,new Promise((r,o)=>{t.addEventListener("load",()=>r(t)),t.addEventListener("error",()=>o())})}function R(e){const t=e.width/e.height,r=400,o=r/t;p(c,r,o),g.drawImage(e,0,0,e.width,e.height,0,0,r,o)}function M(e){let t=256,r=-1;for(let o=0;o<e.length;o+=4){const n=e[o],i=e[o+1],l=e[o+2],s=~~x(n,i,l);s>r&&(r=s),s<t&&(t=s)}return{min:t,max:r}}function N(e,t,r,o){const n=e.getContext("2d"),{min:i,max:l}=M(t),s=devicePixelRatio,y=~~((i+l)/r.length);n.save(),n.font=o+"px monospace";for(let d=0;d<e.width;d+=o*s/1.4)for(let f=0;f<e.height;f+=o*s/1.4){const[w,b,P]=O(~~d,~~f,e.width),u=t[w],a=t[b],m=t[P],I=x(u,a,m);for(let h=1;h<=r.length;h++)if(I<h*y){n.fillStyle=`rgb(${u}, ${a}, ${m})`,n.fillText(r[r.length-h],d/s,f/s);break}}n.restore()}const $=[".",",","*","$","x"],q=10;addEventListener("load",()=>{p(c),L("/images/face.png").then(e=>{R(e);const{data:t}=g.getImageData(0,0,c.width,c.height);g.clearRect(0,0,c.width,c.height),N(c,t,$,q)})});
